{% extends 'base.html' %}

{% block body %}
    <h1>Your Grades</h1>

    {% if student_grades %}
        <table class="grades-table">
            <thead>
                <tr>
                    <th style="text-align: left;">Test</th>
                    <th style="text-align: left;">Question</th>
                    <th style="text-align: left;">Your Answer</th>
                    <th style="text-align: left;">Grade</th>
                </tr>
            </thead>
            <tbody>
                {% set current_test = None %}
                
                {% for entry in student_grades %}
                    {% if entry.test_id != current_test %}
                        {% if current_test is not none %}
                            </tr>  <!-- End previous test rows -->
                        {% endif %}
                        {% set current_test = entry.test_id %}
                    {% endif %}
                    
                    <!-- Add test name in the first column -->
                    <tr>
                        <td>{{ entry.test_id }}</td>
                        <td>{{ entry.question_text }}</td>
                        <td>{{ entry.answer_text }}</td>
                        <td>{{ entry.grade if entry.grade is not none else "Not Graded" }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No grades available yet.</p>
    {% endif %}
{% endblock %}



